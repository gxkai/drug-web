webpackJsonp([62],{"+5y3":function(s,t){},W63p:function(s,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={data:function(){return{shops:[],drugInfo:[],drugSpecs:[],drugSpec:{},drugId:this.$route.query.drugId,drugSpecId:this.$route.query.drugSpecId,show:!1,total:0,sort:"SYNTHESIZE",val:-1,lat:this.$store.getters.position.lat,lng:this.$store.getters.position.lng}},watch:{drugSpec:function(s){this.getShops()}},created:function(){var s=this;this.$http.get("/drugs/"+this.drugId).then(function(t){s.drugInfo=t.data,s.drugSpecs=t.data.drugSpecs,s.drugSpecs.forEach(function(t){t.id===s.drugSpecId&&(s.drugSpec=t)}),s.getShops()}).catch(function(t){s.exception(t)})},mounted:function(){this.$refs.content.style.height=document.documentElement.clientHeight-this.$refs.header.clientHeight+"px",this.$refs.content.style.overflow="auto"},methods:{getShops:function(){var s=this,t="/drugs/"+this.drugId+"/drugSpecs/"+this.drugSpec.id+"/shops?sort="+this.sort+"&lat="+this.lat+"&lng="+this.lng;this.$http.get(t).then(function(t){s.total=t.data.total,s.shops=t.data.list}).catch(function(t){s.exception(t)})},orderById:function(){this.sort="SYNTHESIZE",this.getShops()},orderByDistance:function(){this.sort="DISTANCE",this.getShops()},orderByPrice:function(){"PRICE_DESC"===this.sort?this.sort="PRICE_ASC":this.sort="PRICE_DESC",this.getShops()}}},a={render:function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("div",{staticClass:"drugs-shops"},[r("div",{ref:"header"},[r("van-nav-bar",{attrs:{title:s.drugInfo.name,"left-arrow":""},on:{"click-left":function(t){s.$router.go(-1)}}}),s._v(" "),r("van-swipe",{attrs:{autoplay:3e3}},s._l(s.drugSpec.pics,function(t,o){return r("van-swipe-item",{key:o},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.getImgURL(t,"MIDDLE_PIC"),expression:"getImgURL(pic, 'MIDDLE_PIC')"}]})])})),s._v(" "),r("div",{staticClass:"drugs-shops__part-1"},[r("div",{staticClass:"drugs-shops__part-1__front"},[r("div",{staticClass:"drugs-shops__part-1__front-name"},[s._v(s._s(s.drugInfo.name))]),s._v(" "),r("div",{staticClass:"drugs-shops__part-1__front-introduce"},[s._v(s._s(s.drugInfo.introduce))]),s._v(" "),r("div",{staticClass:"drugs-shops__part-1__front-sfda"},[s._v("国药准字"+s._s(s.drugInfo.sfda))]),s._v(" "),r("div",{staticClass:"drugs-shops__part-1__front-originName"},[s._v("厂商"+s._s(s.drugInfo.originName))])]),s._v(" "),r("div",{staticClass:"drugs-shops__part-1__behind"})]),s._v(" "),r("div",{staticClass:"drugs-shops__part-2 van-hairline--bottom"},[r("van-cell",{attrs:{"is-link":"","arrow-direction":!0===s.show?"down":"right"},on:{click:function(t){s.show=!0}}},[r("template",{slot:"title"},[r("span",{staticClass:"drugs-shops__part-2__left-number"},[s._v("\n          "+s._s(s.total)+"个\n        ")]),s._v(" "),r("span",{staticClass:"drugs-shops__part-2__left-name"},[s._v("\n          商家报价\n        ")])])],2)],1),s._v(" "),r("div",{staticClass:"drugs-shops__part-3"},[r("div",{staticClass:"drugs-shops__part-3__item",on:{click:s.orderById}},[r("div",{staticClass:"drugs-shops__part-3__item__name"},[s._v("\n          综合\n        ")]),s._v(" "),r("div",{staticClass:"drugs-shops__part-3__item__arrow"},[r("div",{staticClass:"drugs-shops__part-3__item__arrow-up",style:{borderBottomColor:"SYNTHESIZE"===s.sort?"#13C1FE":"gray"}}),s._v(" "),r("div",{staticClass:"drugs-shops__part-3__item__arrow-down",style:{borderTopColor:"SYNTHESIZE"===s.sort?"#13C1FE":"gray"}})])]),s._v(" "),r("div",{staticClass:"drugs-shops__part-3__item",on:{click:s.orderByDistance}},[r("div",{staticClass:"drugs-shops__part-3__item__name"},[s._v("\n          距离\n        ")]),s._v(" "),r("div",{staticClass:"drugs-shops__part-3__item__arrow"},[r("div",{staticClass:"drugs-shops__part-3__item__arrow-up",style:{borderBottomColor:"DISTANCE"===s.sort?"#13C1FE":"gray"}}),s._v(" "),r("div",{staticClass:"drugs-shops__part-3__item__arrow-down",style:{borderTopColor:"DISTANCE"===s.sort?"#13C1FE":"gray"}})])]),s._v(" "),r("div",{staticClass:"drugs-shops__part-3__item",on:{click:s.orderByPrice}},[r("div",{staticClass:"drugs-shops__part-3__item__name"},[s._v("\n          价格\n        ")]),s._v(" "),r("div",{staticClass:"drugs-shops__part-3__item__arrow"},[r("div",{staticClass:"drugs-shops__part-3__item__arrow-up",style:{borderBottomColor:"PRICE_ASC"===s.sort?"#13C1FE":"gray"}}),s._v(" "),r("div",{staticClass:"drugs-shops__part-3__item__arrow-down",style:{borderTopColor:"PRICE_DESC"===s.sort?"#13C1FE":"gray"}})])])])],1),s._v(" "),r("div",{ref:"content",staticClass:"drugs-shops__part-4"},s._l(s.shops,function(t,o){return r("div",{key:o,staticClass:"drugs-shops__part-4__item",on:{click:function(r){s.linkToShopDrugSpec(t.shopDrugSpecId)}}},[r("div",{staticClass:"drugs-shops__part-4__item__name"},[s._v("\n        "+s._s(t.name)+"\n      ")]),s._v(" "),r("div",{staticClass:"drugs-shops__part-4__item__price"},[s._v("\n        ¥"+s._s(t.price)+"\n      ")]),s._v(" "),r("div",{staticClass:"drugs-shops__part-4__item__icon"},[r("van-icon",{attrs:{name:"gouwuche3",color:"#13C1FE",size:"4em"}})],1),s._v(" "),r("div",{staticClass:"drugs-shops__part-4__item__info"},[r("van-icon",{attrs:{name:"ditu",color:"#13C1FE",size:"2em"}}),s._v(" "),r("span",[s._v(s._s(t.address))]),s._v(" "),r("van-icon",{attrs:{name:"aixin",color:"#13C1FE",size:"2em"}}),s._v(" "),r("span",[s._v(s._s(t.score))]),s._v(" "),r("van-icon",{attrs:{name:"kucun",color:"#13C1FE",size:"2em"}}),s._v(" "),r("span",[s._v(s._s(t.stock))])],1)])})),s._v(" "),r("van-popup",{attrs:{position:"bottom"},model:{value:s.show,callback:function(t){s.show=t},expression:"show"}},[r("div",{staticClass:"drugs-shops-popup"},[r("div",{staticClass:"drugs-shops-popup-header"},[r("div",{staticClass:"drugs-shops-popup-header-left"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.getImgURL(s.drugSpec.logo,"LARGE_LOGO"),expression:"getImgURL(drugSpec.logo,'LARGE_LOGO')"}]})]),s._v(" "),r("div",{staticClass:"drugs-shops-popup-header-center"},[r("div",{staticClass:"elpsTwo"},[s._v(s._s(s.drugInfo.name)+" "+s._s(s.drugSpec.name)+" -"+s._s(s.drugInfo.originName))]),s._v(" "),r("div",{staticStyle:{color:"#1AB6FD"}},[s._v(s._s(s.drugInfo.sfda))])]),s._v(" "),r("div",{staticClass:"drugs-shops-popup-header-right",on:{click:function(t){s.show=!1}}},[r("i",{staticClass:"iconfont ic-guanbi2"})])]),s._v(" "),r("div",{staticClass:"drugs-shops-popup-content"},[r("div",{staticClass:"drugs-shops-popup-content-title"},[s._v("\n          选择规格\n        ")]),s._v(" "),r("div",{staticClass:"drugs-shops-popup-content-list"},s._l(s.drugSpecs,function(t){return r("div",{staticClass:"drugs-shops-popup-content-list-item",class:{"drugs-shops-popup-content-list-active":s.drugSpec===t},on:{click:function(r){s.show=!1,s.drugSpec=t}}},[r("div",[s._v(s._s(t.name))]),s._v(" "),r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:s.drugSpec,expression:"drugSpec"}],attrs:{id:t,type:"radio"},domProps:{value:t,checked:s._q(s.drugSpec,t)},on:{change:function(r){s.drugSpec=t}}}),s._v(" "),r("label",{attrs:{for:t}})])])}))])])])],1)},staticRenderFns:[]};var i=r("VU/8")(o,a,!1,function(s){r("+5y3")},null,null);t.default=i.exports}});