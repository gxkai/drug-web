webpackJsonp([69],{Ve8i:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"order",props:["order"],data:function(){return{popupVisible:!1,activeButton:{color:"#00ADB3",borderColor:"#00ADB3"},showData:!1}},created:function(){console.log(this.order)},computed:{quantity:function(){var t=0;return this.order.list.forEach(function(e){t+=e.quantity}),t}},methods:{emitOrder:function(){this.$emit("update:order",this.order)},onCancel:function(){var t=this;this.$http.put("/orders/"+this.order.id+"/close").then(function(e){t.order.state="CLOSED",t.emitOrder()}).catch(function(e){t.exception(e)})},onDrug:function(t){this.$router.push({path:"/shopDrugSpecs",query:{shopDrugSpecId:t.shopDrugSpecId}})},onRx:function(){this.$router.push({path:"/rxs/view",query:{rxId:this.order.rxId}})},onShop:function(){switch(this.order.type){case"HOSPITAL":this.$router.push({path:"/hospital/view",query:{shopId:this.order.shopId}});break;default:this.$router.push({path:"/shops/view",query:{shopId:this.order.shopId}})}},onDetail:function(){this.$router.push({path:"/orders/view",query:{orderId:this.order.id}})},onPay:function(){this.$router.push({path:"/orders/pay",query:{orderIds:this.order.id}})},onRefund:function(){this.$router.push({path:"/orderRefunds/create",query:{orderId:this.order.id}})},onDelivery:function(){this.$router.push({path:"/orders/delivery",query:{orderId:this.order.id}})},onAppraise:function(){this.$router.push({path:"/drugAppraises/create",query:{orderId:this.order.id}})},onConfirm:function(){var t=this;this.$http.put("/orders/"+this.order.id+"/complete").then(function(e){"HOSPITAL"===t.order.type?t.order.state="COMPLETED":t.order.state="TO_APPRAISE",t.emitOrder()}).catch(function(e){t.exception(e)})}}},o={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order_item"},[r("div",{staticClass:"order_item-title"},[r("div",{staticClass:"order_item-title-left",on:{click:function(e){t.onShop()}}},[t._m(0),t._v(" "),r("div",{staticClass:"order_item-title-left_name",domProps:{textContent:t._s(t.order.shopName)}})]),t._v(" "),r("div",{staticClass:"order_item-title-right",domProps:{textContent:t._s(t.transformOrderStateSec(t.order.state,t.order.refundState,this))}})]),t._v(" "),r("div",{staticClass:"order_item-content"},[t.isRx(t.order.rxId)?r("div",{staticClass:"order_item-content-title"},[t._m(1),t._v(" "),r("div",{staticClass:"order_item-content-title-right",on:{click:function(e){t.onRx()}}},[t._v("查看处方>")])]):t._e(),t._v(" "),t._l(t.order.list,function(e){return r("div",{staticClass:"order_item-content-info"},[r("div",{staticClass:"order_item-content-info-left"},[e.otc?t._e():r("div",{staticClass:"rx_mark"},[t._v("处")]),t._v(" "),r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getImgURL(e.fileId,"LARGE_LOGO"),expression:"getImgURL(item.fileId,'LARGE_LOGO')"}]})]),t._v(" "),r("div",{staticClass:"order_item-content-info-right"},[r("div",[r("div",{staticClass:"order_item-content-info-right_name",domProps:{textContent:t._s(e.name)}}),t._v(" "),r("div",{staticClass:"order_item-content-info-right_spec",domProps:{textContent:t._s(e.spec)}})]),t._v(" "),r("div",[r("div",{staticClass:"order_item-content-info-right_price"},[t._v("\n               ¥"+t._s(e.price))]),t._v(" "),r("div",{staticClass:"order_item-content-info-right_quantity"},[t._v("\n            x"+t._s(e.quantity))])])])])}),t._v(" "),r("div",{staticClass:"order_item-content-sum"},[t._v("\n      共计"+t._s(t.quantity)+"件商品 合计"+t._s(t.toFixedTwo(t.order.amount))+"\n    ")]),t._v(" "),r("div",{staticClass:"order_item-content-buttons"},["TO_PAY"==t.order.state?r("div",{staticClass:"order_item-content-button",on:{click:function(e){t.onCancel()}}},[t._v("\n        取消订单\n      ")]):t._e(),t._v(" "),"TO_PAY"==t.order.state?r("div",{staticClass:"order_item-content-button",style:t.activeButton,on:{click:function(e){t.onPay()}}},[t._v("\n        我要付款\n      ")]):t._e(),t._v(" "),"TO_RECEIVED"==t.order.state?r("div",{staticClass:"order_item-content-button order_item-content-button-receiveType",style:t.activeButton,on:{click:function(e){t.showData=!t.showData}}},[t._v("\n        收货方式\n        "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.showData,expression:"showData"}],staticClass:"order_item-content-button-receiveType-list"},["DELIVERY"==t.order.deliveryType?r("div",{staticClass:"order_item-content-button-receiveType-list-item",on:{click:t.linkToQRCode}},[t._v("\n            扫码确认\n          ")]):t._e(),t._v(" "),"SELF"==t.order.deliveryType?r("div",{staticClass:"order_item-content-button-receiveType-list-item",on:{click:function(e){t.$emit("onQrcode",t.order)}}},[t._v("\n            收货二维码\n          ")]):t._e(),t._v(" "),r("div",{staticClass:"order_item-content-button-receiveType-list-item",on:{click:function(e){t.onConfirm()}}},[t._v("\n            手动确认\n          ")])])]):t._e(),t._v(" "),"DELIVERY"!=t.order.deliveryType||"TO_RECEIVED"!=t.order.state&&"TO_APPRAISE"!=t.order.state&&"COMPLETED"!=t.order.state&&"REFUNDING"!=t.order.state?t._e():r("div",{staticClass:"order_item-content-button",on:{click:function(e){t.onDelivery()}}},[t._v("\n      查看配送\n      ")]),t._v(" "),"TO_APPRAISE"==t.order.state?r("div",{staticClass:"order_item-content-button",on:{click:function(e){t.onAppraise()}}},[t._v("\n        我要评价\n      ")]):t._e(),t._v(" "),r("div",{staticClass:"order_item-content-button",on:{click:function(e){t.onDetail()}}},[t._v("\n        订单详情\n      ")]),t._v(" "),"TO_RECEIVED"==t.order.state&&"HOSPITAL"===t.order.type?r("div",{on:{click:function(e){t.linkToTakeDrug(t.order.id)}}},[t._v("取药地址")]):t._e()])],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont ic-yaodian"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"order_item-content-title-left"},[e("div",[e("i",{staticClass:"iconfont ic-chufangdanluru"})]),this._v(" "),e("div",{staticClass:"order_item-content-title-left_name"},[this._v("处方单")])])}]};var n=r("VU/8")(i,o,!1,function(t){r("inna")},"data-v-2457822e",null);e.default=n.exports},inna:function(t,e){}});