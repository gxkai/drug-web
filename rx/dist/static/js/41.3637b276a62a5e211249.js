webpackJsonp([41],{QeFv:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o={name:"shopInfo",props:{},data:function(){return{loading:!1,finished:!1,isLoading:!1,pageNum:0,pageSize:15,list:[],shopSort:"SYNTHESIZE",searchIcon:" 药品名"}},computed:{position:function(){return this.$store.getters.position}},created:function(){},mounted:function(){},methods:{onRefresh:function(){this.finished=!1,this.list=[],this.pageNum=0,this.onLoad()},onLoad:function(){var t=this;this.pageNum++,this.$http.get("/shops",{params:{lat:this.position.lat,lng:this.position.lng,sort:this.shopSort,pageNum:this.pageNum,pageSize:this.pageSize}}).then(function(s){t.isLoading=!1,t.loading=!1,t.list=t.list.concat(s.data.list),console.log(t.list),0===s.data.list.length&&(t.finished=!0)}).catch(function(s){t.exception(s)})},orderBy:function(t){this.shopSort=t,this.onRefresh()}}},e={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("new-layout",{staticClass:"shops"},[i("div",{attrs:{slot:"top"},slot:"top"},[i("div",{staticClass:"shops-header"},[i("new-header",[i("div",{attrs:{slot:"left"},on:{click:function(s){t.$router.go(-1)}},slot:"left"},[i("i",{staticClass:"iconfont ic-arrow-right"})]),t._v(" "),i("div",{attrs:{slot:"center"},slot:"center"},[i("input",{staticClass:"iconfont",attrs:{placeholder:t.searchIcon},on:{focus:function(s){t.$router.push("/drugs")}}})])])],1),t._v(" "),i("div",{staticClass:"shops-filter"},[i("div",{staticClass:"shops-filter-item",on:{click:function(s){t.orderBy("SYNTHESIZE")}}},[i("div",{staticClass:"shops-filter-item-text"},[t._v("\n          综合\n        ")]),t._v(" "),i("div",{staticClass:"shops-filter-item-arrow"},[i("div",{staticClass:"shops-filter-item-arrow-up",style:{borderBottomColor:"SYNTHESIZE"===t.shopSort?"#13C1FE":"gray"}}),t._v(" "),i("div",{staticClass:"shops-filter-item-arrow-down",style:{borderTopColor:"SYNTHESIZE"===t.shopSort?"#13C1FE":"gray"}})])]),t._v(" "),i("div",{staticClass:"shops-filter-item",on:{click:function(s){t.orderBy("DISTANCE")}}},[i("div",{staticClass:"shops-filter-item-text"},[t._v("\n          距离最近\n        ")]),t._v(" "),i("div",{staticClass:"shops-filter-item-arrow"},[i("div",{staticClass:"shops-filter-item-arrow-up",style:{borderBottomColor:"DISTANCE"===t.shopSort?"#13C1FE":"gray"}}),t._v(" "),i("div",{staticClass:"shops-filter-item-arrow-down",style:{borderTopColor:"DISTANCE"===t.shopSort?"#13C1FE":"gray"}})])]),t._v(" "),i("div",{staticClass:"shops-filter-item",on:{click:function(s){t.orderBy("APPRAISE")}}},[i("div",{staticClass:"shops-filter-item-text"},[t._v("\n          好评优先\n        ")]),t._v(" "),i("div",{staticClass:"shops-filter-item-arrow"},[i("div",{staticClass:"shops-filter-item-arrow-up",style:{borderBottomColor:"APPRAISE"===t.shopSort?"#13C1FE":"gray"}}),t._v(" "),i("div",{staticClass:"shops-filter-item-arrow-down",style:{borderTopColor:"APPRAISE"===t.shopSort?"#13C1FE":"gray"}})])]),t._v(" "),i("div",{staticClass:"shops-filter-item",on:{click:function(s){t.orderBy("SALE")}}},[i("div",{staticClass:"shops-filter-item-text"},[t._v("\n          销量最多\n        ")]),t._v(" "),i("div",{staticClass:"shops-filter-item-arrow"},[i("div",{staticClass:"shops-filter-item-arrow-up",style:{borderBottomColor:"SALE"===t.shopSort?"#13C1FE":"gray"}}),t._v(" "),i("div",{staticClass:"shops-filter-item-arrow-down",style:{borderTopColor:"SALE"===t.shopSort?"#13C1FE":"gray"}})])])])]),t._v(" "),i("div",{staticClass:"shops-container",attrs:{slot:"center"},slot:"center"},[i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(s){t.isLoading=s},expression:"isLoading"}},[i("van-list",{attrs:{finished:t.finished},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},[t._l(t.list,function(s,o){return i("div",{key:o,staticClass:"shops-container-item",attrs:{item:s},on:{click:function(i){t.$router.push({path:"/shops/view",query:{shopId:s.id}})}}},[i("div",{staticClass:"shops-container-item-left"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getImgURL(s.fileId,"LARGE_LOGO"),expression:"getImgURL(item.fileId,'LARGE_LOGO')"}]})]),t._v(" "),i("div",{staticClass:"shops-container-item-right"},[i("div",[t._v("\n                "+t._s(s.name)+"\n              ")]),t._v(" "),i("div",[i("new-star",{attrs:{score:s.score,disabled:""}})],1),t._v(" "),i("div",[t._v("\n                电话："+t._s(s.phone)+"\n              ")]),t._v(" "),i("div",[t._v("\n                地址："+t._s(s.address)+"\n              ")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!0===s.distribution,expression:"item.distribution === true"}],staticClass:"shops-container-item-peisong"},[i("i",{staticClass:"iconfont ic-peisong-"})])])}),t._v(" "),t.finished?i("new-no-data"):t._e()],2)],1)],1)])},staticRenderFns:[]};var r=i("VU/8")(o,e,!1,function(t){i("e5WD")},"data-v-6d737220",null);s.default=r.exports},e5WD:function(t,s){}});