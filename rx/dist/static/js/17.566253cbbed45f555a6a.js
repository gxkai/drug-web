webpackJsonp([17],{Y4eO:function(t,e){},tfnj:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("Dd8w"),c=n.n(a),i=n("NYxO"),o={data:function(){return{}},computed:c()({},Object(i.b)(["account"])),created:function(){},methods:{showActionSheet:function(){var t=this;plus.nativeUI.actionSheet({title:"修改用户头像",cancel:"取消",buttons:[{title:"拍照"},{title:"从手机相册选择"}]},function(e){switch(e.index){case 0:break;case 1:t.getImage();break;case 2:t.galleryImg()}})},getImage:function(){var t=this,e=plus;e.camera.getCamera().captureImage(function(n){e.io.resolveLocalFileSystemURL(n,function(e){t.uploadHead(e.toLocalURL(),t)},function(t){console.log("读取拍照文件错误："+t.message)})},function(t){console.log("error"+t)},{filename:"_doc/head.png"})},galleryImg:function(){var t=this;plus.gallery.pick(function(e){t.uploadHead(e,t)},function(t){console.log("取消选择图片")},{filter:"image",multiple:!1})},uploadHead:function(t,e){console.log(t);var n=new Image;n.onload=function(){var t=e.getBase64Image(n),a=new FormData;a.append("fileType","LOGO"),a.append("file",t);e.$http.post("/files/image",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){e.account.fileId=t.data,e.$http.put("/accounts",e.account).then(function(t){e.$store.commit("SET_ACCOUNT",e.account)}).catch(function(t){e.exception(t)})}).catch(function(t){e.exception(t)})},n.src=t,n.style.width="100px",n.style.height="100px"},getBase64Image:function(t){var e=document.createElement("canvas"),n=t.width,a=t.height;n>a?n>100&&(a=Math.round(a*=100/n),n=100):a>100&&(n=Math.round(n*=100/a),a=100),e.width=n,e.height=a,e.getContext("2d").drawImage(t,0,0,n,a);var c=e.toDataURL("image/png",1);return console.log(c),c}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"account"},[n("van-nav-bar",{ref:"header",attrs:{title:t.$route.name,"left-arrow":""},on:{"click-left":function(e){t.$router.go(-1)}}}),t._v(" "),n("div",{staticClass:"account-container"},[n("div",{staticClass:"account-container-item",on:{click:function(e){t.showActionSheet()}}},[t._m(0),t._v(" "),n("div",{staticClass:"account-container-item-right"},[n("div",[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getImgURL(t.account.fileId,"SMALL_LOGO"),expression:"getImgURL(account.fileId,'SMALL_LOGO')"}],attrs:{id:"headImg"}})]),t._v(" "),t._m(1)])]),t._v(" "),n("div",{staticClass:"account-container-item",on:{click:function(e){t.$router.push("/accounts/edit")}}},[t._m(2),t._v(" "),t._m(3)]),t._v(" "),n("div",{staticClass:"account-container-item",on:{click:function(e){t.$router.push("/accounts/password")}}},[t._m(4),t._v(" "),t._m(5)])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"account-container-item-left"},[e("div",{staticClass:"text-l-25"},[this._v("头像")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont ic-youjiantou"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"account-container-item-left"},[e("div",{staticClass:"text-l-25"},[this._v("隐私")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"account-container-item-right"},[e("div",[e("i",{staticClass:"iconfont ic-youjiantou"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"account-container-item-left"},[e("div",{staticClass:"text-l-25"},[this._v("修改密码")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"account-container-item-right"},[e("div",[e("i",{staticClass:"iconfont ic-youjiantou"})])])}]};var r=n("VU/8")(o,s,!1,function(t){n("Y4eO")},"data-v-f2b625bc",null);e.default=r.exports}});