webpackJsonp([5],{CwSZ:function(t,e,r){"use strict";var i=r("p8xL"),o=r("XgCd"),n={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},s=Date.prototype.toISOString,a={delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,serializeDate:function(t){return s.call(t)},skipNulls:!1,strictNullHandling:!1},l=function t(e,r,o,n,s,l,c,u,d,p,f,m){var g=e;if("function"==typeof c)g=c(r,g);else if(g instanceof Date)g=p(g);else if(null===g){if(n)return l&&!m?l(r,a.encoder):r;g=""}if("string"==typeof g||"number"==typeof g||"boolean"==typeof g||i.isBuffer(g))return l?[f(m?r:l(r,a.encoder))+"="+f(l(g,a.encoder))]:[f(r)+"="+f(String(g))];var h,v=[];if(void 0===g)return v;if(Array.isArray(c))h=c;else{var y=Object.keys(g);h=u?y.sort(u):y}for(var b=0;b<h.length;++b){var w=h[b];s&&null===g[w]||(v=Array.isArray(g)?v.concat(t(g[w],o(r,w),o,n,s,l,c,u,d,p,f,m)):v.concat(t(g[w],r+(d?"."+w:"["+w+"]"),o,n,s,l,c,u,d,p,f,m)))}return v};t.exports=function(t,e){var r=t,s=e?i.assign({},e):{};if(null!==s.encoder&&void 0!==s.encoder&&"function"!=typeof s.encoder)throw new TypeError("Encoder has to be a function.");var c=void 0===s.delimiter?a.delimiter:s.delimiter,u="boolean"==typeof s.strictNullHandling?s.strictNullHandling:a.strictNullHandling,d="boolean"==typeof s.skipNulls?s.skipNulls:a.skipNulls,p="boolean"==typeof s.encode?s.encode:a.encode,f="function"==typeof s.encoder?s.encoder:a.encoder,m="function"==typeof s.sort?s.sort:null,g=void 0!==s.allowDots&&s.allowDots,h="function"==typeof s.serializeDate?s.serializeDate:a.serializeDate,v="boolean"==typeof s.encodeValuesOnly?s.encodeValuesOnly:a.encodeValuesOnly;if(void 0===s.format)s.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,s.format))throw new TypeError("Unknown format option provided.");var y,b,w=o.formatters[s.format];"function"==typeof s.filter?r=(b=s.filter)("",r):Array.isArray(s.filter)&&(y=b=s.filter);var C,k=[];if("object"!=typeof r||null===r)return"";C=s.arrayFormat in n?s.arrayFormat:"indices"in s?s.indices?"indices":"repeat":"indices";var S=n[C];y||(y=Object.keys(r)),m&&y.sort(m);for(var _=0;_<y.length;++_){var I=y[_];d&&null===r[I]||(k=k.concat(l(r[I],I,S,u,d,p?f:null,b,m,g,h,w,v)))}var O=k.join(c),R=!0===s.addQueryPrefix?"?":"";return O.length>0?R+O:""}},DDCP:function(t,e,r){"use strict";var i=r("p8xL"),o=Object.prototype.hasOwnProperty,n={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:i.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},s=function(t,e,r){if(t){var i=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,n=/(\[[^[\]]*])/g,s=/(\[[^[\]]*])/.exec(i),a=s?i.slice(0,s.index):i,l=[];if(a){if(!r.plainObjects&&o.call(Object.prototype,a)&&!r.allowPrototypes)return;l.push(a)}for(var c=0;null!==(s=n.exec(i))&&c<r.depth;){if(c+=1,!r.plainObjects&&o.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;l.push(s[1])}return s&&l.push("["+i.slice(s.index)+"]"),function(t,e,r){for(var i=e,o=t.length-1;o>=0;--o){var n,s=t[o];if("[]"===s)n=(n=[]).concat(i);else{n=r.plainObjects?Object.create(null):{};var a="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,l=parseInt(a,10);!isNaN(l)&&s!==a&&String(l)===a&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(n=[])[l]=i:n[a]=i}i=n}return i}(l,e,r)}};t.exports=function(t,e){var r=e?i.assign({},e):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||i.isRegExp(r.delimiter)?r.delimiter:n.delimiter,r.depth="number"==typeof r.depth?r.depth:n.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:n.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:n.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:n.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:n.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:n.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:n.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:n.strictNullHandling,""===t||null===t||void 0===t)return r.plainObjects?Object.create(null):{};for(var a="string"==typeof t?function(t,e){for(var r={},i=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,s=e.parameterLimit===1/0?void 0:e.parameterLimit,a=i.split(e.delimiter,s),l=0;l<a.length;++l){var c,u,d=a[l],p=d.indexOf("]="),f=-1===p?d.indexOf("="):p+1;-1===f?(c=e.decoder(d,n.decoder),u=e.strictNullHandling?null:""):(c=e.decoder(d.slice(0,f),n.decoder),u=e.decoder(d.slice(f+1),n.decoder)),o.call(r,c)?r[c]=[].concat(r[c]).concat(u):r[c]=u}return r}(t,r):t,l=r.plainObjects?Object.create(null):{},c=Object.keys(a),u=0;u<c.length;++u){var d=c[u],p=s(d,a[d],r);l=i.merge(l,p,r)}return i.compact(l)}},SDPh:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r("mw3O"),o={name:"goodsList",data:function(){return{loading:!1,finished:!1,isLoading:!1,pageNum:0,pageSize:15,list:[],contentStyle:{height:0,overflow:"auto"},show:!1,showName:!1,names:[],namesResult:[],showOrigin:!1,origins:[],originsResult:[],showSpec:!1,specs:[],specsResult:[],showForm:!1,forms:[],formsResult:[],drugTypeId:this.$route.query.typeId||"",keyword:this.$route.query.keyword||"",drugSort:"SYNTHESIZE_DESC",searchIcon:" 药品名"}},components:{},computed:{namesFilter:function(){return this.namesResult.map(function(t){return t.name}).join(",")},originsFilter:function(){return this.originsResult.map(function(t){return t.name}).join(",")},specsFilter:function(){return this.specsResult.map(function(t){return t.name}).join(",")},formsFilter:function(){return this.formsResult.map(function(t){return t.name}).join(",")},commonName:function(){return this.namesResult.map(function(t){return t.name})},originId:function(){return this.originsResult.map(function(t){return t.id})},specId:function(){return this.specsResult.map(function(t){return t.id})},formId:function(){return this.formsResult.map(function(t){return t.id})}},created:function(){},mounted:function(){this.contentStyle.height=document.documentElement.clientHeight-document.getElementById("header").clientHeight+"px"},methods:{onReset:function(){this.namesResult=[],this.originsResult=[],this.specsResult=[],this.formsResult=[]},onRefresh:function(){this.finished=!1,this.list=[],this.pageNum=0,this.onLoad()},onLoad:function(){var t=this;this.pageNum++,console.log(this.commonName,this.originId,this.specId,this.formId),this.$http.get("/drugs",{params:{pageNum:this.pageNum,pageSize:this.pageSize,keyword:this.keyword,drugTypeId:this.drugTypeId,sort:this.drugSort,commonName:this.commonName,originId:this.originId,specId:this.specId,formId:this.formId},paramsSerializer:function(t){return i.stringify(t,{arrayFormat:"repeat"})}}).then(function(e){t.isLoading=!1,t.loading=!1,t.list=t.list.concat(e.data.list),0===e.data.list.length&&(t.finished=!0)}).catch(function(e){t.exception(e)})},OrderById:function(){this.drugSort="SYNTHESIZE_DESC",this.onRefresh()},OrderByPrice:function(){"PRICE_DESC"===this.drugSort?this.drugSort="PRICE_ASC":this.drugSort="PRICE_DESC",this.onRefresh()},OrderBySales:function(){"SALE_DESC"===this.drugSort?this.drugSort="SALE_ASC":this.drugSort="SALE_DESC",this.onRefresh()},filterByName:function(){var t=this;this.$http.get("/drugs/name",{params:{drugTypeId:this.drugTypeId,originId:this.originId,specId:this.specId,formId:this.formId},paramsSerializer:function(t){return i.stringify(t,{arrayFormat:"repeat"})}}).then(function(e){t.namesResult=[],t.names=e.data}).catch(function(e){t.exception(e)})},filterByOrigin:function(){var t=this;this.$http.get("/origins",{params:{drugTypeId:this.drugTypeId,commonName:this.commonName,specId:this.specId,formId:this.formId},paramsSerializer:function(t){return i.stringify(t,{arrayFormat:"repeat"})}}).then(function(e){t.originsResult=[],t.origins=e.data}).catch(function(e){t.exception(e)})},filterBySpec:function(){var t=this;this.$http.get("/specs",{params:{drugTypeId:this.drugTypeId,commonName:this.commonName,originId:this.originId,formId:this.formId},paramsSerializer:function(t){return i.stringify(t,{arrayFormat:"repeat"})}}).then(function(e){t.specsResult=[],t.specs=e.data}).catch(function(e){t.exception(e)})},filterByForm:function(){var t=this;this.$http.get("/forms",{params:{drugTypeId:this.drugTypeId,commonName:this.commonName,originId:this.originId,specId:this.specId},paramsSerializer:function(t){return i.stringify(t,{arrayFormat:"repeat"})}}).then(function(e){t.formsResult=[],t.forms=e.data}).catch(function(e){t.exception(e)})}}},n={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"drugs"},[r("div",{attrs:{id:"header"}},[r("div",{staticClass:"drugs-header"},[r("new-header",[r("div",{attrs:{slot:"left"},on:{click:function(e){t.$router.go("-1")}},slot:"left"},[r("i",{staticClass:"iconfont ic-arrow-right"})]),t._v(" "),r("div",{attrs:{slot:"center"},slot:"center"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"iconfont",attrs:{placeholder:t.searchIcon},domProps:{value:t.keyword},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.onRefresh()},input:function(e){e.target.composing||(t.keyword=e.target.value)}}})]),t._v(" "),r("div",{attrs:{slot:"right"},on:{click:function(e){t.onRefresh()}},slot:"right"},[r("i",{staticClass:"iconfont ic-sousuo"})])])],1),t._v(" "),r("div",{staticClass:"drugs-filter"},[r("div",{staticClass:"drugs-filter-item",on:{click:function(e){t.OrderById()}}},[r("div",{staticClass:"drugs-filter-item-text"},[t._v("\n          默认\n        ")]),t._v(" "),r("div",{staticClass:"drugs-filter-item-arrow"},[r("div",{staticClass:"drugs-filter-item-arrow-up",style:{borderBottomColor:"SYNTHESIZE_DESC"===t.drugSort?"#13C1FE":"gray"}}),t._v(" "),r("div",{staticClass:"drugs-filter-item-arrow-down",style:{borderTopColor:"SYNTHESIZE_DESC"===t.drugSort?"#13C1FE":"gray"}})])]),t._v(" "),r("div",{staticClass:"drugs-filter-item",on:{click:function(e){t.OrderByPrice()}}},[r("div",{staticClass:"drugs-filter-item-text"},[t._v("\n          价格\n        ")]),t._v(" "),r("div",{staticClass:"drugs-filter-item-arrow"},[r("div",{staticClass:"drugs-filter-item-arrow-up",style:{borderBottomColor:"PRICE_ASC"===t.drugSort?"#13C1FE":"gray"}}),t._v(" "),r("div",{staticClass:"drugs-filter-item-arrow-down",style:{borderTopColor:"PRICE_DESC"===t.drugSort?"#13C1FE":"gray"}})])]),t._v(" "),r("div",{staticClass:"drugs-filter-item",on:{click:function(e){t.OrderBySales()}}},[r("div",{staticClass:"drugs-filter-item-text"},[t._v("\n          销量\n        ")]),t._v(" "),r("div",{staticClass:"drugs-filter-item-arrow"},[r("div",{staticClass:"drugs-filter-item-arrow-up",style:{borderBottomColor:"SALE_ASC"===t.drugSort?"#13C1FE":"gray"}}),t._v(" "),r("div",{staticClass:"drugs-filter-item-arrow-down",style:{borderTopColor:"SALE_DESC"===t.drugSort?"#13C1FE":"gray"}})])]),t._v(" "),r("div",{staticClass:"drugs-filter-item",on:{click:function(e){t.show=!0}}},[r("div",{staticClass:"drugs-filter-item-text"},[t._v("\n          筛选\n        ")]),t._v(" "),t._m(0)])])]),t._v(" "),r("div",{style:t.contentStyle},[r("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[r("van-list",{staticClass:"drugs-container",attrs:{finished:t.finished},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[t._l(t.list,function(t,e){return r("new-drug-item",{key:e,staticClass:"border-bottom-grey",attrs:{item:t}})}),t._v(" "),t.finished?r("new-no-data"):t._e()],2)],1)],1),t._v(" "),r("van-popup",{staticClass:"drugs--popup",attrs:{position:"right"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[r("van-cell-group",[r("van-cell",[r("span",{staticClass:"drugs--popup--filter",attrs:{slot:"title"},slot:"title"},[t._v("筛选")])]),t._v(" "),r("van-cell",{attrs:{title:"商品名称","is-link":"",value:t.namesFilter},on:{click:function(e){t.showName=!0,t.filterByName()}}}),t._v(" "),r("van-cell",{attrs:{title:"厂家","is-link":"",value:t.originsFilter},on:{click:function(e){t.showOrigin=!0,t.filterByOrigin()}}}),t._v(" "),r("van-cell",{attrs:{title:"规格","is-link":"",value:t.specsFilter},on:{click:function(e){t.showSpec=!0,t.filterBySpec()}}}),t._v(" "),r("van-cell",{attrs:{title:"剂型","is-link":"",value:t.formsFilter},on:{click:function(e){t.showForm=!0,t.filterByForm()}}})],1),t._v(" "),r("van-row",{staticClass:"drugs--popup--bottom",attrs:{type:"flex",justify:"space-around"}},[r("van-button",{attrs:{type:"default"},on:{click:t.onReset}},[t._v("重置\n      ")]),t._v(" "),r("van-button",{attrs:{type:"primary"},on:{click:t.onRefresh}},[t._v("确认\n      ")])],1)],1),t._v(" "),r("van-popup",{staticClass:"drugs--popup",attrs:{position:"right"},model:{value:t.showName,callback:function(e){t.showName=e},expression:"showName"}},[r("van-cell",[r("span",{staticClass:"drugs--popup--filter",attrs:{slot:"title"},on:{click:function(e){t.showName=!1}},slot:"title"},[t._v("返回")])]),t._v(" "),r("van-checkbox-group",{model:{value:t.namesResult,callback:function(e){t.namesResult=e},expression:"namesResult"}},[r("van-cell-group",t._l(t.names,function(e,i){return r("van-cell",{key:i,attrs:{clickable:"",title:""+e.name},on:{click:function(e){t.$refs.names[i].toggle()}}},[r("van-checkbox",{ref:"names",refInFor:!0,attrs:{name:e}})],1)}))],1)],1),t._v(" "),r("van-popup",{staticClass:"drugs--popup",attrs:{position:"right"},model:{value:t.showOrigin,callback:function(e){t.showOrigin=e},expression:"showOrigin"}},[r("van-cell",[r("span",{staticClass:"drugs--popup--filter",attrs:{slot:"title"},on:{click:function(e){t.showOrigin=!1}},slot:"title"},[t._v("返回")])]),t._v(" "),r("van-checkbox-group",{model:{value:t.originsResult,callback:function(e){t.originsResult=e},expression:"originsResult"}},[r("van-cell-group",t._l(t.origins,function(e,i){return r("van-cell",{key:i,attrs:{clickable:"",title:""+e.name},on:{click:function(e){t.$refs.origins[i].toggle()}}},[r("van-checkbox",{ref:"origins",refInFor:!0,attrs:{name:e}})],1)}))],1)],1),t._v(" "),r("van-popup",{staticClass:"drugs--popup",attrs:{position:"right"},model:{value:t.showSpec,callback:function(e){t.showSpec=e},expression:"showSpec"}},[r("van-cell",[r("span",{staticClass:"drugs--popup--filter",attrs:{slot:"title"},on:{click:function(e){t.showSpec=!1}},slot:"title"},[t._v("返回")])]),t._v(" "),r("van-checkbox-group",{model:{value:t.specsResult,callback:function(e){t.specsResult=e},expression:"specsResult"}},[r("van-cell-group",t._l(t.specs,function(e,i){return r("van-cell",{key:i,attrs:{clickable:"",title:""+e.name},on:{click:function(e){t.$refs.specs[i].toggle()}}},[r("van-checkbox",{ref:"specs",refInFor:!0,attrs:{name:e}})],1)}))],1)],1),t._v(" "),r("van-popup",{staticClass:"drugs--popup",attrs:{position:"right"},model:{value:t.showForm,callback:function(e){t.showForm=e},expression:"showForm"}},[r("van-cell",[r("span",{staticClass:"drugs--popup--filter",attrs:{slot:"title"},on:{click:function(e){t.showForm=!1}},slot:"title"},[t._v("返回")])]),t._v(" "),r("van-checkbox-group",{model:{value:t.formsResult,callback:function(e){t.formsResult=e},expression:"formsResult"}},[r("van-cell-group",t._l(t.forms,function(e,i){return r("van-cell",{key:i,attrs:{clickable:"",title:""+e.name},on:{click:function(e){t.$refs.forms[i].toggle()}}},[r("van-checkbox",{ref:"forms",refInFor:!0,attrs:{name:e}})],1)}))],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"drugs-filter-item-arrow"},[e("div",{staticClass:"drugs-filter-item-arrow-up"}),this._v(" "),e("div",{staticClass:"drugs-filter-item-arrow-down",staticStyle:{"margin-top":".1rem"}})])}]};var s=r("VU/8")(o,n,!1,function(t){r("WHrO")},null,null);e.default=s.exports},WHrO:function(t,e){},XgCd:function(t,e,r){"use strict";var i=String.prototype.replace,o=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return i.call(t,o,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},mw3O:function(t,e,r){"use strict";var i=r("CwSZ"),o=r("DDCP"),n=r("XgCd");t.exports={formats:n,parse:o,stringify:i}},p8xL:function(t,e,r){"use strict";var i=Object.prototype.hasOwnProperty,o=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),n=function(t,e){for(var r=e&&e.plainObjects?Object.create(null):{},i=0;i<t.length;++i)void 0!==t[i]&&(r[i]=t[i]);return r};t.exports={arrayToObject:n,assign:function(t,e){return Object.keys(e).reduce(function(t,r){return t[r]=e[r],t},t)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],i=0;i<e.length;++i)for(var o=e[i],n=o.obj[o.prop],s=Object.keys(n),a=0;a<s.length;++a){var l=s[a],c=n[l];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(e.push({obj:n,prop:l}),r.push(c))}return function(t){for(var e;t.length;){var r=t.pop();if(e=r.obj[r.prop],Array.isArray(e)){for(var i=[],o=0;o<e.length;++o)void 0!==e[o]&&i.push(e[o]);r.obj[r.prop]=i}}return e}(e)},decode:function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},encode:function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),r="",i=0;i<e.length;++i){var n=e.charCodeAt(i);45===n||46===n||95===n||126===n||n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122?r+=e.charAt(i):n<128?r+=o[n]:n<2048?r+=o[192|n>>6]+o[128|63&n]:n<55296||n>=57344?r+=o[224|n>>12]+o[128|n>>6&63]+o[128|63&n]:(i+=1,n=65536+((1023&n)<<10|1023&e.charCodeAt(i)),r+=o[240|n>>18]+o[128|n>>12&63]+o[128|n>>6&63]+o[128|63&n])}return r},isBuffer:function(t){return null!==t&&void 0!==t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(e,r,o){if(!r)return e;if("object"!=typeof r){if(Array.isArray(e))e.push(r);else{if("object"!=typeof e)return[e,r];(o.plainObjects||o.allowPrototypes||!i.call(Object.prototype,r))&&(e[r]=!0)}return e}if("object"!=typeof e)return[e].concat(r);var s=e;return Array.isArray(e)&&!Array.isArray(r)&&(s=n(e,o)),Array.isArray(e)&&Array.isArray(r)?(r.forEach(function(r,n){i.call(e,n)?e[n]&&"object"==typeof e[n]?e[n]=t(e[n],r,o):e.push(r):e[n]=r}),e):Object.keys(r).reduce(function(e,n){var s=r[n];return i.call(e,n)?e[n]=t(e[n],s,o):e[n]=s,e},s)}}}});